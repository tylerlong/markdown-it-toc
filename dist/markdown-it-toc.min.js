!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.markdownitTOC=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";module.exports=function(md){function toc(state,silent){for(;state.src.indexOf("\n")>=0&&state.src.indexOf("\n")<state.src.indexOf("[toc]");)"softbreak"===state.tokens.slice(-1)[0].type&&(state.src=state.src.split("\n").slice(1).join("\n"),state.pos=0);var token;if(91!==state.src.charCodeAt(state.pos))return!1;var match=TOC_REGEXP.exec(state.src);if(!match)return!1;if(match=match.filter(function(m){return m}),match.length<1)return!1;if(silent)return!1;token=state.push("toc_open","toc",1),token.markup="[toc]",token=state.push("toc_body","",0),token.content="",token=state.push("toc_close","toc",-1);var offset=0,newline=state.src.indexOf("\n");return offset=-1!==newline?state.pos+newline:state.pos+state.posMax+1,state.pos=offset,!0}var gstate,TOC_REGEXP=/^\[toc\]$/im;md.renderer.rules.heading_open=function(tokens,index){var level=tokens[index].tag,label=tokens[index+1];if("inline"===label.type){var anchor=label.map[0];return"<"+level+'><a id="'+anchor+'"></a>'}return"</h1>"},md.renderer.rules.toc_open=function(tokens,index){return""},md.renderer.rules.toc_close=function(tokens,index){return""},md.renderer.rules.toc_body=function(tokens,index){for(var headings=[],gtokens=gstate.tokens,size=gtokens.length,i=0;size>i;i++)if("heading_close"===gtokens[i].type){var token=gtokens[i],heading=gtokens[i-1];"inline"===heading.type&&headings.push({level:+token.tag.substr(1,1),anchor:heading.map[0],content:heading.content})}var indent=0,list=headings.map(function(heading){var res=[];if(heading.level>indent)for(var ldiff=heading.level-indent,i=0;ldiff>i;i++)res.push('<ul class="table-of-contents">'),indent++;else if(heading.level<indent)for(var ldiff=indent-heading.level,i=0;ldiff>i;i++)res.push("</ul>"),indent--;return res=res.concat(['<li><a href="#',heading.anchor,'">',heading.content,"</a></li>"]),res.join("")});return list.join("")+new Array(indent+1).join("</ul>")},md.core.ruler.push("grab_state",function(state){gstate=state}),md.inline.ruler.after("emphasis","toc",toc)}},{}]},{},[1])(1)});
